= AlphaNUS - Developer Guide
:site-section: DeveloperGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:warning-caption: :warning:
endif::[]
:repoURL: https://github.com/se-edu/addressbook-level3/tree/master

By: `AY1920S1-CS2113T-F10-3` Since: `Aug 2019` Licence: `NUS`


== Introduction

=== About AlphaNUS

NUS treasurers often come face to face with piles of payment forms for claims and also need to
keep track of their statuses. Having to manage and allocate club funds to multiple projects, treasurers
may find it a chore to keep up to date with their finances.

AlphaNUS is a financial management system for treasurers to keep track of payment forms made by payees as well manage the club's funds for projects.

This developer guide includes detailed documentation on the designs and implementations of the project and how developers can make changes it.

== Setting up

=== Prerequisites

. *JDK `11`* or above
. *IntelliJ* IDE
+
[NOTE]
IntelliJ by default has Gradle and JavaFx plugins installed. +
Do not disable them. If you have disabled them, go to `File` > `Settings` > `Plugins` to re-enable them.

=== Setting up the project in your computer

. Fork this repo, and clone the fork to your computer
. Open IntelliJ (if you are not in the welcome screen, click `File` > `Close Project` to close the existing project dialog first)
. Set up the correct JDK version for Gradle
.. Click `Configure` > `Project Defaults` > `Project Structure`
.. Click `New...` and find the directory of the JDK
. Click `Import Project`
. Locate the `build.gradle` file and select it. Click `OK`
. Click `Open as Project`
. Click `OK` to accept the default settings
. Open a console and run the command `gradlew processResources` (Mac/Linux: `./gradlew processResources`). It should finish with the `BUILD SUCCESSFUL` message. +
This will generate all resources required by the application and tests.

== Design
.Architecture Diagram
image::ArchitectureDiagram.png[]

The *_Architecture Diagram_* given above displays the n-tier architecture design of the AlphaNUS. Given below is a quick overview of each component.

* <<Design-Ui,*`UI`*>>: The UI of the App.
* <<Design-Command,*`Command`*>>: The command executor and parser.
* <<Design-Model,*`Model`*>>: Holds the data of the App in-memory.
* <<Design-Storage,*`Storage`*>>: Reads data from, and writes data to, the hard disk.

[[Design-Ui]]
=== UI component

.Structure of the UI Component
image::UiClassDiagram.png[]

The UI solely consists of a `Ui` object that is initiated at the start of the program.

The `UI` component,

* Executes user commands using the `Command` component.
* Listens for changes to `Model` data so that the UI can be updated with the modified data.

[[Design-Command]]
=== Command component

.Structure of the Command Component
image::CommandClassDiagram.png[]

The `Command` component consists of:

* `Parser` to make sense of user input.
* `Instruction` to determine which process to execute.
* `Process` to process the execution of the command.


[[Design-Model]]
=== Model component
[[fig-ModelClassDiagram]]
.Structure of the Model Component
image::ModelClassDiagram.png[]

.  Both `ProjectManager` and `PaymentManager` takes in user input from `Command`.
.  The `ProjectManager` class manages a HashMap of `Project` objects.
.  Each `Project` object contains a `Budget` object and a HashMap of `Payee` objects.
.  Each `Payee` object contains a HashMap of `Payments` objects.
.  Results of the command execution by `ProjectManager` and `PaymentManager` are encapsulated as a `Project` and `Payments` objects respectively by `ProjectManager` and passed back to `Command`.

[[Design-Storage]]
=== Storage component

{To be added}

== Implementation
This section describes some noteworthy details on how certain features are implemented.

=== Project Feature
The `project` feature is managed by the `ProjectManager` class, which is called by the
`Process` class in the `Command` component.

This feature supports the following commands:

* `add project pr/PROJECT_NAME` -- Adds a new project to the record.
* `delete project pr/PROJECT_NAME` -- Deletes a project from the record.
* `goto project pr/PROJECT_NAME` -- Go to a project in the record.
* `list project` -- Lists all projects in the record.

A detailed explanation of the use case for the `add project` command is given below to demonstrate how each component interacts with each other.

1. User executes the command `add project pr/RAG` in the CLI. This input is passed from the `Ui` to `Command` where the input will be parsed to determine the command to execute.

2. The `Command` component will process the `add project` command and execute it in the `Model` component, calling `ProjectManager` to add a new `Project` object with the user defined `PROJECT_NAME` to its HashMap of `Project` objects.

3. `ProjectManager` then returns a value of the newly created `Project` object to `Command` which is passed to `Ui` for printing the project details to the user.

Below is a sequence diagram to provide a visual representation of the `add project` command.

[[fig-AddProjectSeqDiagram]]
.Sequence Diagram of the add project command
image::AddProjectSeqDiagram.png[]

The `delete project` command is implemented in the same manner to the `add project` command. Both return the `Project` object that was deleted or added to be passed to `Ui` for printing its details to the user. The `delete project` command only differs from the `add project` command when it deletes the `Project` object from the HashMap of `Project` objects, in contrast to adding a `Project` object to the HashMap.

//tag::deadline
=== Add Invoices

==== Implementation
The add invoice function is an extending feature for `deadline`. It considers real life situations and automatically set up the deadline for submission of payment forms for the users.

Given below is an example usage scenario and how the `add invoice` behaves at each step.

Step 1: The user add in a new deadline for payment form submission using the command `deadline d/DESCRIPTION`. Now there is no invoice for this submission, therefore both invoice and deadline should be shown as null.

Step 2: The user gets the corresponding invoice. He then sets the invoice number to the deadline using the command `invoice ID i/INVOICE_NUMBER`.

Step 3: The user then call the `list` command, he can observe that the deadline is automatically set to 30 days after the current date. The invoice number is not null anymore as well.

==== Design Considerations

===== Aspect: How add invoice executes

* **Alternative 1 (current choice):** The deadline is set to a fixed date(30 days after the invoice comes). The deadline can be adjusted using `reschedule` and `snooze`.
** Pros: Easy for the NUS treasurers to use.
** Cons: The customers cannot customize the time gap between the submission deadline and the date they get the deadline.
* **Alternative 2:** The user can set the gap time by themselves.
** Pros: In this way the application is more customized and can be applied to different situations.
** Cons: This might cause unnecessary inconvenience.
//end of add invoice

//tag: reminder
=== (Proposed) Reminder
==== Proposed Implementation
The reminder function is another extending feature for deadline. By calling the relative command `reminder`, AlphaNUS will return the deadline with the highest priority (i.e. the earliest deadline). The deadline with the highest priority will also be shown at the starting page so as to perform as a reminder for the user.

Given below is an example usage scenario and how the `reminder` behaves at each step.

Step 1: The user launches the application for the first time. No reminder will be shown on the starting page as there is no deadline.

Step 2: The user adds in new deadlines and assigns different deadlines to it by adding invoice at different dates.

Step 3: Now the user can perform 'reminder' command. AlphaNUS will return a deadline task which has the earliest deadline among all the current deadlines that have received their invoices. If there is no submissions with their deadlines set, AlphaNUS will return a null result.

Step 4: The user exit AlphaNUS through `bye` command. When he relaunch the application, the reminder of the deadline with the highest priority will be shown on the starting page.

==== Design Considerations
===== Aspect: How reminder executes
* **Alternative 1 (current choice):** the application performs sorting on the tasklist and returns the first element everytime the command is called
** Pros: The result is accurate
** Cons: This will cause the application to be slow when there are many tasks to be processed.
* **Alternative 2:** The application only performs sorting once when a new task is added. The result id will be stored in a single integer.
** Pros: This method saves memory required and minimize the runtime when the command is called.
** Cons: It might be inaccurate when the user applies reschedule. Possible solution is to sort the list everytime the user reschedule a task. This will make the reschedule command to be slow on the other hand.

== Documentation

{To be added}

== Testing

{To be added}

== Dev Ops

{To be added}

[appendix]
== Product Scope

*Target user profile*:

* NUS treasurers who need to track a large number of payment forms
* manages the finances of multiple projects at once
* prefer desktop apps over other types
* can type fast
* prefers typing over mouse input
* is reasonably comfortable using CLI apps

*Value proposition*: Manage payments faster than a typical mouse/GUI driven app

[appendix]
== User Stories

Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*`

[width="59%",cols="22%,<23%,<25%,<30%",options="header",]
|=======================================================================
|Priority |As a ... |I want to ... |So that I can...
|`* * *` |new user |see usage instructions |refer to instructions when I forget how to use the App

|`* * *` |NUS Treasurer |add the budget for an event |spend within my budget

|`* * *` |NUS Treasurer |add my deadlines |keep track of the payments to be submitted

|`* * *` |NUS Treasurer |add payees for payments|keep track of the payments made by each payee

|`* * *` |NUS Treasurer |delete payees who made payments|remove payees whom I do not need to track

|`* * *` |NUS Treasurer |add payments made by payees|keep track of the payments made by each payee

|`* * *` |NUS Treasurer |delete payments made by payees|remove payments which I do not need to track

|`* *` |NUS Treasurer |import files to update my payments made by a payee |do not have to manually input it myself

|`* *` |NUS Treasurer |export my payments for a project into a statement of accounts |can submit it to my supervisors

|`* *` |NUS Treasurer |set priorities for each deadline |decide which task to finish first

|`* *` |NUS Treasurer |keep track of projects that I am in-charge of |manage the payments for each project

|`* *` |NUS Treasurer |view the amount of money remaining from my budget |budget my spending better

|`* *` |NUS Treasurer |edit my forms easily |correct any mistakes i make

|`* *` |NUS Treasurer |delete my forms easily |correct any mistakes i make

|`* *` |NUS Treasurer |find my forms easily |locate details of an event without going through the whole list

|`* *` |NUS Treasurer |approve my payment forms |track which payment forms have been approved

|`*` |NUS Treasurer |categorise the payment forms I submitted into projects |keep track of the payment forms belonging to a particular project

|`*` |NUS Treasurer |share my payment forms |get approval from my superiors
|=======================================================================

[appendix]
== Use Cases

(For all use cases below, the *System* is `AlphaNUS` and the *Actor* is the `NUS Treasurer`, unless specified otherwise)

=== Use case: Add a new project

*MSS*

1.  User requests to add a new project.
2.  AlphaNUS adds a new project to its record.
+
Use case ends.

*Extensions*

[none]
* 1a. The user types in an invalid command.
** 1a1. AlphaNUS shows an error message.
+
Use case ends.

* 2a. There is no current project being worked on.
** 2a1. AlphaNUS adds a new project to its record.
** 2a2. AlphaNUS updates the current project to the newly created project.
+
Use case ends.

=== Use case: Delete a project

*MSS*

1.  User requests to delete a project.
2.  AlphaNUS deletes the project from its record.
+
Use case ends.

*Extensions*

[none]
* 1a. The user types in an invalid command.
** 1a1. AlphaNUS shows an error message.
+
Use case ends.

* 2a. The project to delete is the current project being worked on.
** 2a1. AlphaNUS removes the project from being currently worked on.
** 2a2. AlphaNUS deletes the project from its record.
+
Use case ends.

=== Use case: Go to a project.

*MSS*

1.  User requests to go to a project.
2.  AlphaNUS sets the current project being worked on to the project specified.
+
Use case ends.

*Extensions*

[none]
* 1a. The user types in an invalid command.
** 1a1. AlphaNUS shows an error message.
+
Use case ends.

=== Use case: Add a new deadline

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User types in the command line the deadline description and time.
4.  AlphaNUS adds the deadline.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in an invalid deadline command.
** 3a1. AlphaNUS shows an error message and the correct deadline input format.
+
Use case ends.

=== Use case: Add a new payment form

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User types in the command line the payment description, items and the cost of each item.
4.  AlphaNUS adds the payment form.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in an invalid payment command.
** 3a1. AlphaNUS shows an error message and the correct payment input format.
+
Use case ends.

=== Use case: Delete an existing payee

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User types in the command line the payee's name.
4.  AlphaNUS deletes the payee.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in a payee that does not exist.
** 3a1. AlphaNUS shows a non-existing payee error message.
+
Use case ends.

=== Use case: Find a payment form or deadline

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User types in the command line the command to find and a keyword containing part of the description of a deadline or payment form.
4.  AlphaNUS lists the deadlines and payment forms with descriptions that matches the keyword.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in an invalid find command.
** 3a1. AlphaNUS shows an error message and the correct find input format.
+
Use case ends.

[none]
* 3b. User types in a keyword that returns no match.
** 3b1. AlphaNUS shows a no-match error message.
+
Use case ends.

=== Use case: Edit the description of a payment form or a deadline

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User types in command line the command to edit a payment form or deadline with a new description.
4.  AlphaNUS updates the payment form/deadline with the new description.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in a non-existing id.
** 3a1. AlphaNUS shows a non-existing id error message.
+
Use case ends.

=== Use case: Edit the time of a deadline

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User requests to reschedule a deadline to a new time.
4.  AlphaNUS updates the deadline with the new time.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in a non-existing id for a deadline.
** 3a1. AlphaNUS shows a non-existing id error message.
+
Use case ends.

[none]
* 3b. User types in an invalid time.
** 3b1. AlphaNUS shows an invalid time error message.
+
Use case ends.

[none]
* 3c. User requests to snooze the deadline.
** 3c1. AlphaNUS snoozes the deadline by 1 hour.
+
Use case ends.

[none]
* 3d. User requests to [.underline]#find the deadline# first.
** 3d1. AlphaNUS lists the deadlines that match the keyword searched.
+
Use case resumes from step 3.

=== Use case: Edit the <<payment-details, payment details>> of a payment form

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User requests to redetail a payment form.
4.  AlphaNUS updates the payment form with its new payment details.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in a non-existing id for a payment form.
** 3a1. AlphaNUS shows a non-existing id error message.
+
Use case ends.

[none]
* 3d. User requests to [.underline]#find the payment form# first.
** 3d1. AlphaNUS lists the payment forms that match the keyword searched.
+
Use case resumes from step 3.


=== Use case: Approve a payment form

*MSS*

1.  User opens the JAR file.
2.  AlphaNUS shows a command line along with different sections such as “Deadlines”, “Payments” and “Payment History”.
3.  User requests to approve a payment form.
4.  AlphaNUS sets the payment form to approved.
+
Use case ends.

*Extensions*

[none]
* 3a. User types in a non-existing id for a payment form.
** 3a1. AlphaNUS shows a non-existing id error message.
+
Use case ends.

[none]
* 3d. User requests to [.underline]#find the payment form# first.
** 3d1. AlphaNUS lists the payment forms that match the keyword searched.
+
Use case resumes from step 3.

[appendix]
== Non Functional Requirements

.  Should work on any <<mainstream-os,mainstream OS>> as long as it has Java `11` or above installed.
.  Should be able to support up to 1000 payment forms and deadlines without a noticeable sluggishness in performance for typical usage.
.  A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.

[appendix]
== Glossary

[[mainstream-os]] Mainstream OS::
Windows, Linux, Unix, OS-X

[[payment-details]] Payment Details::
The item name and its cost in a payment form.